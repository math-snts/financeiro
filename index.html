<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meu Controle Financeiro</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f172a">
  <style>
    /* === CSS ORIGINAL === */
    :root {
      --bg: #3f3f3f;
      --card: #5c5c5c;
      --muted: #1f2937;
      --text: #e5e7eb;
      --text-dim: #9ca3af;
      --accent: #22c55e;
      --accent-2: #3b82f6;
      --danger: #ef4444;
      --warn: #f59e0b;
      --radius: 18px;
    }
    body.light {
      --bg: #f9fafb;
      --card: #ffffff;
      --muted: #e5e7eb;
      --text: #111827;
      --text-dim: #374151;
      --accent: #22c55e;
      --accent-2: #2563eb;
      --danger: #dc2626;
      --warn: #d97706;
    }
    * { box-sizing: border-box }
    html, body { height: 100% }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif;
    }
    header {
      position: sticky;
      top: 0;
      background: rgba(56, 56, 56, 0.8);
      backdrop-filter: saturate(180%) blur(8px);
      border-bottom: 1px solid var(--muted);
      z-index: 10;
    }
    body.light header { background: rgba(249,250,251,.8); }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 18px }
    .row { display: flex; gap: 12px; flex-wrap: wrap }
    .grow { flex: 1 1 280px }
    h1 { font-size: 22px; margin: 0; font-weight: 700 }
    nav { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px }
    nav button {
      background: var(--bg);
      border: 1px solid var(--muted);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 999px;
      cursor: pointer;
    }
    nav button.active {
      background: var(--accent-2);
      border-color: transparent;
      color: #fff;
    }
    main { max-width: 1100px; margin: 16px auto; padding: 0 18px 70px }
    .grid { display: grid; gap: 14px }
    .grid.cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)) }
    @media (max-width:900px){.grid.cols-3{grid-template-columns:1fr}}
    .card {
      background: var(--card);
      border: 1px solid var(--muted);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 6px 30px rgba(255, 255, 255, 0.25);
    }
    .card h2 { margin: 0 0 12px; font-size: 18px }
    .muted { color: var(--text-dim) }
    .kpi { font-size: 26px; font-weight: 800 }
    .row-inline { display: flex; gap: 10px; align-items: center; gap: 6px; }
    label { font-size: 12px; color: var(--text-dim) }
    input,select {
      width: 100%; padding: 10px 12px; background: var(--bg);
      border: 1px solid var(--muted); border-radius: 12px; color: var(--text)
    }
    .btn {
      background: var(--accent-2);
      color: white; border: none;
      padding: 10px 14px; border-radius: 12px;
      cursor: pointer; font-weight: 600
    }
    .btn.ghost { background: var(--bg); border: 1px solid var(--muted); color: var(--text) }
    .btn.warn { background: var(--warn) }
    .btn.danger { background: var(--danger) }
    table { width: 100%; border-collapse: collapse }
    th, td { padding: 10px; border-bottom: 1px solid var(--muted); text-align: left }
    th { color: var(--text-dim); font-weight: 600; font-size: 12px; text-transform: uppercase }
    tfoot td { font-weight: 700 }
    .tag { padding: 4px 8px; border-radius: 999px; font-size: 11px; border: 1px solid var(--muted) }
    .right { text-align: right }
    .space-top { margin-top: 12px }
    .note { font-size: 12px; color: var(--text-dim) }
    footer { position: fixed; bottom: 10px; left: 0; right: 0; display: flex; justify-content: center; pointer-events: none }
    .dock { pointer-events: auto; background: var(--bg); border: 1px solid var(--muted); border-radius: 999px; padding: 8px 10px; display: flex; gap: 8px; box-shadow: 0 10px 30px rgba(0,0,0,.35) }
    .switch { position: relative; display: inline-flex; align-items: center; gap:6px; cursor: pointer; }
    .switch input { display:none }
    .slider {
      width: 46px; height: 24px; background: var(--muted); border-radius: 999px;
      position: relative; transition:.3s;
    }
    .slider::before {
      content:""; position:absolute; top:2px; left:2px;
      width:20px; height:20px; border-radius:50%;
      background:#fff; transition:.3s;
    }
    input:checked + .slider::before { transform: translateX(22px) }
    input:checked + .slider { background: var(--accent-2) }
    .table-container { overflow-x: auto; }
    #tblDesp { width: 100%; border-collapse: collapse; }
    #tblDesp th, #tblDesp td { padding: 6px 8px; text-align: left; white-space: nowrap; }
    #tblDesp th.right, #tblDesp td.right { text-align: right; }
    @media (max-width: 600px) {
      #tblDesp th:nth-child(2), #tblDesp td:nth-child(2),
      #tblDesp th:nth-child(3), #tblDesp td:nth-child(3) { display: none; }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="row" style="align-items:center;justify-content:space-between">
        <div class="grow">
          <h1>ðŸ’° Meu Controle Financeiro</h1>
          <div class="muted">Controle seus ganhos e despesas por perÃ­odo</div>
        </div>
        <div class="row-inline">
          <select id="periodSelect" class="btn ghost" style="width:auto"></select>
          <label class="switch">
            <span id="themeIcon">ðŸŒž</span>
            <input type="checkbox" id="themeToggle">
            <span class="slider"></span>
            <span></span>
          </label>
        </div>
      </div>
      <nav id="tabs"></nav>
    </div>
  </header>

  <!-- === SEÃ‡Ã•ES ORIGINAIS (Dashboard, Renda, Despesas, CartÃµes, Config Dados) === -->
  <!-- (Aqui mantÃ©m exatamente como estava no seu index.html original) -->

  <script>
  // ... (todo seu JS original igual estava, funÃ§Ãµes de render etc.)

  // ======= LÃ“GICA FREE VS PREMIUM VIA URL =======
  (function(){
    const urlParams = new URLSearchParams(window.location.search);
    const plano = urlParams.get("plano") || "free"; // padrÃ£o free se nÃ£o passar nada

    const select = (sel) => document.querySelector(sel);
    const remove = (sel) => { const el=select(sel); if(el) el.remove(); };

    if(plano === "free"){
      remove("#cardSomaTipos");
      remove("#periodSelect");
      remove("#novoTipo");
      remove("#btnAddTipo");
      remove("#boxRendaRec");
      remove("#boxDespRec");

      const tabBtn = Array.from(document.querySelectorAll("nav button"))
        .find(btn => btn.textContent.includes("CartÃµes"));
      if(tabBtn) tabBtn.remove();
      remove("#tab-cartoes");
    }
  })();

  // ======= RENDER ALL =======
  renderTabs();
  applyTheme();
  renderAll();
  </script>
</body>
</html>
